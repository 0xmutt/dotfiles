#!/bin/bash

# Plank Spacer
# Simple script for adding spacers into Plank.
# 
# USAGE: add-plank-space
# 
# Author: Denys Dovhan
# Based on: https://github.com/rpeshkov/plank-spacer

# Generate random code
UUID=$(cat /proc/sys/kernel/random/uuid)
SPACER_APP="$HOME/.local/share/applications/spacer-$UUID.desktop"
SPACE_ITEM="$HOME/.config/plank/dock1/launchers/spacer-$UUID.dockitem"

# If _blank.png does not exist, then copy it to ~/.icons 
if [ ! -f ~/.icons/_blank.png ]; then
  echo "Copying _blank.png to ~/.icons/ ..."
  [ ! -d ~/.icons ] && mkdir -p ~/.icons
  cp ~/Dotfiles/bin/_blank.png ~/.icons/
fi;

# Make new .desktop file with unique name
echo "Creating spacer-$UUID.desktop file..."
cat <<EOF > $SPACER_APP
[Desktop Entry]
Version=1.0
Type=Application
Name=Spacer
Exec=nothing
Icon=$HOME/.icons/_blank.png
NoDisplay=true
EOF

# Make unique plank item
cat <<EOF > $SPACE_ITEM
[PlankItemsDockItemPreferences]
Launcher=file://$HOME/.local/share/applications/spacer-$UUID.desktop
EOF

# Output final message
echo "New spacer dock item created with name \"spacer-$UUID\""
